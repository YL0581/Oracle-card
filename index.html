<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>紫微三才神諭 - 現代東方美學</title>
    <style>
        :root {
            --amber-gold: #d4a017;
            --bg-dark: #0f0c29;
            --text-gold: #f4e4bc;
            --rev-red: #ff4d4d;
        }

        body {
            background: var(--bg-dark);
            color: var(--text-gold);
            font-family: "Noto Serif TC", "Microsoft JhengHei", serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h1 { color: var(--amber-gold); letter-spacing: 5px; text-shadow: 0 0 10px rgba(212, 160, 23, 0.5); }

        .type-selector { margin: 20px 0; display: flex; gap: 15px; }

        .type-btn {
            background: transparent;
            border: 1px solid var(--amber-gold);
            color: var(--amber-gold);
            padding: 8px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .type-btn.active { background: var(--amber-gold); color: #000; }

        .spread-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
            width: 100%;
        }

        .card-wrapper { display: flex; flex-direction: column; align-items: center; }

        .pos-label { margin-bottom: 15px; color: var(--amber-gold); font-size: 1.2rem; font-weight: bold; }

        .card {
            width: 200px;
            height: 355px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            border: 2px solid var(--amber-gold);
            overflow: hidden;
        }

        .card-back {
            background: linear-gradient(135deg, #1a1a1a, #4b3621);
            display: flex; align-items: center; justify-content: center;
        }
        .card-back::before { content: "◈"; font-size: 40px; color: var(--amber-gold); }

        .card-front {
            background-color: #000;
            background-size: cover;
            background-position: center;
            transform: rotateY(180deg);
        }

        .result-panel {
            display: none;
            max-width: 1000px;
            width: 95%;
            margin-top: 50px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border-top: 4px solid var(--amber-gold);
            backdrop-filter: blur(10px);
            margin-bottom: 80px;
        }

        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 20px; }

        .res-box { 
            padding: 20px; 
            background: rgba(0, 0, 0, 0.4); 
            border: 1px solid rgba(212, 160, 23, 0.3); 
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .res-box h4 { color: var(--amber-gold); margin-top: 0; border-bottom: 1px solid rgba(212, 160, 23, 0.2); padding-bottom: 10px; }
        
        .res-box p { line-height: 1.6; font-size: 0.95rem; }

        .action-btn {
            background: var(--amber-gold);
            color: #000;
            border: none;
            padding: 15px 45px;
            border-radius: 30px;
            font-weight: bold;
            margin-top: 40px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(212, 160, 23, 0.4);
        }
    </style>
</head>
<body>

    <h1>紫微三才神諭</h1>
    
    <div class="type-selector">
        <button class="type-btn active" onclick="selectType('career', this)">事業</button>
        <button class="type-btn" onclick="selectType('love', this)">感情</button>
        <button class="type-btn" onclick="selectType('wealth', this)">財運</button>
    </div>

    <div class="spread-container">
        <div class="card-wrapper">
            <div class="pos-label">過去 (前因)</div>
            <div id="card-0" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div>
        </div>
        <div class="card-wrapper">
            <div class="pos-label">現在 (現況)</div>
            <div id="card-1" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div>
        </div>
        <div class="card-wrapper">
            <div class="pos-label">未來 (果報)</div>
            <div id="card-2" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div>
        </div>
    </div>

    <button class="action-btn" id="draw-btn" onclick="drawThreeCards()">開啟三才牌陣</button>

    <div id="result-panel" class="result-panel">
        <h2 style="text-align:center; color: var(--amber-gold);">─ 神諭解讀 ─</h2>
        <div class="result-grid" id="result-content"></div>
        <center><button onclick="location.reload()" style="background:none; color:var(--amber-gold); border:1px solid var(--amber-gold); padding:10px 20px; border-radius:20px; margin-top:40px; cursor:pointer;">重新抽牌</button></center>
    </div>

    <script>
        let currentType = 'career';
        
        const deck = [
            { id: 1, name: "紫微星", meaning: "帝王之志", career: "【事業】具備極佳的領導能力與升遷運。若身為下屬，則深得長輩器重；主管應以德服人。", love: "【感情】另一半條件優越或自尊較強。相處需給予面子。單身者有望遇到社會地位高的對象。", wealth: "【財運】財源廣大且穩定。正財運極佳，適合長期且大額的投資佈局。財力足以支撐生活。" },
            { id: 2, name: "天機星", meaning: "靈活機變", career: "【事業】適合從事策劃、諮詢或資訊等高腦力工作。目前計畫多變，應保持彈性，不宜死守教條。", love: "【感情】心思過於細膩，容易患得患失。交流多偏精神層次。需注意因瑣事產生口舌爭執。", wealth: "【財運】流動性財運，非定財。利於短期投機、智慧財。錢財來去快，需良好理財計畫。" },
            { id: 3, name: "太陽星", meaning: "普照大地", career: "【事業】表現亮眼，適合外交、教育。名聲越響事業越順。需防過度勞心勞力，功勞被分走。", love: "【感情】熱情主動。男性利於追求，女性易遇熱烈但強勢的伴侶。感情生活穩定溫暖。", wealth: "【財運】先求名後得利。容易為了他人支出大筆金錢，屬慷慨大方之型，宜多留點老本。" },
            { id: 4, name: "武曲星", meaning: "剛正果敢", career: "【事業】具備極強的開創力與執行力。適合金融、技術開發。工作忙碌，勞而有獲。", love: "【感情】個性直爽但不浪漫。易因專注工作冷落伴侶。建議多些柔性表達，避免金錢爭吵。", wealth: "【財運】正財星入命，財運最旺。付出與回報成正比。利於自行創業，理財眼光精準。" },
            { id: 5, name: "天同星", meaning: "福德知足", career: "【事業】人緣極佳，適合協調、服務業。缺乏衝勁是弱點，適合在穩定體系中發展。", love: "【感情】浪漫多情。感情進展順利，雙方能共享生活樂趣。需防因過度依賴對方失去自我。", wealth: "【財運】衣食無憂。容易有意外禮物，但大財需靠積沙成塔，不宜參與高風險投資。" },
            { id: 6, name: "廉貞星", meaning: "外交官員", career: "【事業】應酬多交際強。簽約需格外謹慎，防止捲入職權紛爭。適合創意產業或公關工作。", love: "【感情】充滿魅力桃花旺。容易吸引性格強烈對象。需注意佔有慾，避免複雜多角關係。", wealth: "【財運】偏財起伏較大。易因人際獲利，也可能因罰單損財。投資應守法，不可存僥倖。" },
            { id: 7, name: "天府星", meaning: "號令群臣", career: "【事業】工作穩定且具領導潛能。適在大機構任管理職。作風穩健，是團隊中的定心丸。", love: "【感情】重視生活品質。對另一半要求較高，希望穩定踏實。生活雖乏激情但具安全感。", wealth: "【財運】天生守財專家。財庫豐滿，擅長不動產或穩健投資。財富隨年齡增長。" },
            { id: 8, name: "太陰星", meaning: "柔美如月", career: "【事業】適幕後、房產或女性產業。環境優雅、步調穩健最能發揮。不宜競爭激烈的環境。", love: "【感情】溫潤如水，重靈魂契合。易遇溫柔伴侶。男性易得女性長輩或平輩之助。", wealth: "【財運】財源來自積蓄。對數字敏感。財運如同月亮盈虧，雖有波動但總體呈現上升趨勢。" },
            { id: 9, name: "貪狼星", meaning: "慾望之火", career: "【事業】適合表演、業務、社交工作。競爭力強。需防因三分鐘熱度而事倍功半。", love: "【感情】桃花極旺，生活精彩但易生波折。需克制過度慾望，避免猶豫不決而受傷。", wealth: "【財運】偏財運極強，適合短線操作。有橫發機會，建議將獲利轉為固定資產。" },
            { id: 10, name: "巨門星", meaning: "口舌辯才", career: "【事業】靠嘴吃飯的行業。口才犀利是優點但易得罪人。需防小人背後指點與是非。", love: "【感情】易因言語誤會引發冷戰。信任度不足，經常猜疑。建議開誠布公，避免積怨。", wealth: "【財運】勞碌致富。每分錢都是靠口舌換來。求財過程多是非，不建議與人合夥投資。" },
            { id: 11, name: "天相星", meaning: "印星掌職", career: "【事業】天生經理人。擅長文書協調。表現專業得體，深得同儕信賴。適行政或服務業。", love: "【感情】注重門當戶對與形象。易因相親遇到合適對象，相處像老朋友般舒服。", wealth: "【財運】財富來自專業職能報酬。理財觀念中規中矩，雖無暴發運，但衣食優渥。" },
            { id: 12, name: "天梁星", meaning: "長者廕蔭", career: "【事業】適合醫療、法律、教育。具幫助他人使命感。在職場中常扮演化解衝突角色。", love: "【感情】喜歡照顧年齡小的伴侶。感情平淡穩定。遇到危機通常有長輩出面協調。", wealth: "【財運】有意外廕財運，如遺產或贈予。求財不宜投資，財氣來自於累積與德行回饋。" },
            { id: 13, name: "七殺星", meaning: "將星開創", career: "【事業】適合變動與壓力行業。不畏強權。目前面臨轉型，應勇敢衝刺，不宜優柔。", love: "【感情】愛恨分明。進展快但易衝突。需控制脾氣，避免因衝動說出傷人的話。", wealth: "【財運】橫發橫破之相。敢進行高風險投資，獲利大時需見好就收。適合個人戰鬥力取財。" },
            { id: 14, name: "破軍星", meaning: "破壞重建", career: "【事業】環境處大變動中。適合推翻舊制、研發新品。先壞後好，突破現狀才有生機。", love: "【感情】觀念前衛不喜束縛。易有閃婚或突然分手。雙方生活差異大，需磨合。", wealth: "【財運】波動極大，不適合投機。投資計畫易變卦，應專注本業避免錢財冒險。" },
            { id: 15, name: "左輔星", meaning: "助力圓融", career: "【事業】貴人運佳且多為平輩。目前工作適合團隊合作。計畫將在眾人支持下達成。", love: "【感情】感情和諧，遇問題有親友協調。單身者易透過朋友認識條件相當對象。", wealth: "【財運】財運平穩。利於與人合夥或參與團體投資，財源來自穩定的人際關係。" },
            { id: 16, name: "右弼星", meaning: "支援轉機", career: "【事業】關鍵時刻總能得到資源。工作中有兼職機會，適合多角化經營職涯。", love: "【感情】情感豐富且具彈性。爭執將現轉圜契機。需注意因人緣太好產生的曖昧。", wealth: "【財運】失而復得之運。容易有意外偏財，如兼差或中獎。理財宜靈活變通。" },
            { id: 17, name: "文昌星", meaning: "功名契約", career: "【事業】考運旺盛。適文字、行政或學術。處理合約、簽署文件會非常順利。", love: "【感情】追求心靈契合。喜歡浪漫有才伴侶。相處文藝，適合訊息傳情。", wealth: "【財運】靠智慧致富。正財穩定，投資眼光精準。利於投資文化產業或教育類股。" },
            { id: 18, name: "文曲星", meaning: "才藝感性", career: "【事業】發揮才華時機。適演藝、美妝或諮詢。口才魅力佳，靠特色說服他人。", love: "【感情】異性緣爆棚，生活驚喜多。易遇感性伴侶。需防感情用事失去理智。", wealth: "【財運】財源多元，常有非固定收入。理財憑直覺，防因心軟產生的借貸損失。" },
            { id: 19, name: "天魁星", meaning: "陽貴機遇", career: "【事業】得男性長輩提攜。目前是展現才華時機，貴人會為你引薦重要機會。", love: "【感情】易遇社會地位高對象。另一半能提供實質照顧，生活穩定具未來感。", wealth: "【財運】財富來自上層資訊。正財運極佳，利長期投資計畫，貴人直接點財路。" },
            { id: 20, name: "天鉞星", meaning: "陰貴機緣", career: "【事業】得女性貴人暗助。看似無路時會有轉機。適合珠寶、美容等行業。", love: "【感情】易生暗戀，或有女性長輩牽線。另一半是溫柔精神支柱與幫助。", wealth: "【財運】有意外暗財。求財過程順遂，不需太操勞即可獲得應有報酬。" },
            { id: 21, name: "擎羊星", meaning: "衝擊剛強", career: "【事業】職場具強烈競爭。需防排擠或血光。開創拼勁強但建議退一步海闊天空。", love: "【感情】進展激烈愛恨交織。易因脾氣火爆傷到對方。需學會妥協，避免衝動。", wealth: "【財運】起伏劇烈，需防突發財損。理財應採取守勢，避免高風險賭博。" },
            { id: 22, name: "陀羅星", meaning: "糾纏磨難", career: "【事業】計畫停滯不前，反覆不定。需耐心應對，不宜急躁更換職涯方向。", love: "【感情】陷入膠著冷戰。雙方存在難解陳年問題，需給彼此空間冷靜。", wealth: "【財運】求財辛苦且緩慢。易因小錢糾葛不清。建議暫停大額開支，守住資產。" },
            { id: 23, name: "地空星", meaning: "空靈靈悟", career: "【事業】靈感豐但執行易落空。不適傳統工作，適藝術、宗教或創意設計。", love: "【感情】感到孤寂，即便有伴也覺不被理解。需尋找共同興趣或信仰連結。", wealth: "【財運】不聚財，容易有突發開銷或丟失。理財應以現金流靈活為策略。" },
            { id: 24, name: "地劫星", meaning: "現實阻礙", career: "【事業】半路殺出程咬金。努力短期難見成效，需防小人截胡勞動成果。", love: "【感情】受現實經濟或長輩阻礙。這是一段考驗真心的時期，需共患難。", wealth: "【財運】破財之兆。不宜合夥借錢給他人。投資應當機立斷停損，守財即賺。" },
            { id: 25, name: "火星", meaning: "爆發焦慮", career: "【事業】事業有爆發式進展。節奏極快需防過勞。適短期、高爆發力行業。", love: "【感情】閃戀閃婚機會高。需注意是否僅為一時衝動，冷靜後才能看清。", wealth: "【財運】橫發橫破。有暴發機會，但也易因揮霍或焦慮消費迅速耗盡財富。" },
            { id: 26, name: "鈴星", meaning: "隱憂暗擾", career: "【事業】職場暗流湧動，防背後冷箭。表現穩定但心存焦慮，應強大心理建設。", love: "【感情】溝通斷層，有苦不說。感情中存未爆彈，建議開誠布公避免冷戰。", wealth: "【財運】求財過程驚心動魄。有財但進帳辛苦，理財應低調，財不露白。" },
            { id: 27, name: "天馬星", meaning: "奔波升遷", career: "【事業】越忙越有利。適外派、旅遊業。目前的變動是為了更好的發展。", love: "【感情】遠距離戀情或旅途結緣。需頻繁互動與共創回憶來維護情感。", wealth: "【財運】動中取財。適合外貿或運輸。錢財隨著名聲而來，不適在家坐等。" },
            { id: 28, name: "祿存星", meaning: "祿庫厚實", career: "【事業】職位穩如泰山。福利待遇將提升。這是一個積累實力與資本的絕佳期。", love: "【感情】另一半能提供生活保障。進展緩慢但踏實，適商討婚嫁大事。", wealth: "【財運】財運亨通。財庫飽滿，適合長期儲蓄、購買房產。是致富最佳時機。" },
            { id: 29, name: "化祿", meaning: "圓滿財源", career: "【事業】一切順心如意。資源主動找上門。這是一個開展新專案的黃金期。", love: "【感情】情感甜蜜穩定。單身者會遇心儀對象，已婚者生活充滿喜悅。", wealth: "【財運】財源滾滾。無論正財偏財都有斬獲。求財輕鬆，投資回報超預期。" },
            { id: 30, name: "化權", meaning: "掌握威望", career: "【事業】掌握實權威望升。注意不要過於霸道，以免引起同事反彈。", love: "【感情】佔主導地位。能為對方遮風避雨，但也要學會尊重傾聽。", wealth: "【財運】財富掌控度高。利大型投資。適合擴張版圖，財產能獲得快速成長。" },
            { id: 31, name: "化科", meaning: "名望科名", career: "【事業】聲望大增獲得肯定。適合品牌經營。職場口碑是你最大的資產。", love: "【感情】相敬如賓。雙方家人認可。適合舉辦婚禮或公開戀情，氣氛溫馨。", wealth: "【財運】名大於利。財富來自穩定薪資與名聲。投資隨名氣平穩上升。" },
            { id: 32, name: "化忌", meaning: "糾紛受困", career: "【事業】計畫受阻是非多。容易出錯。建議多看少說，暫緩任何重大決策。", love: "【感情】情路坎坷。容易因執著傷彼此。需放下心中執念，才能解脫。", wealth: "【財運】財運困頓，謹防合約糾紛。投資易有去無回。這是一個需低調的時期。" }
        ];

        function selectType(type, btn) {
            currentType = type;
            document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function drawThreeCards() {
            document.getElementById('draw-btn').style.display = 'none';
            const resultContent = document.getElementById('result-content');
            resultContent.innerHTML = '';
            
            const shuffled = [...deck].sort(() => 0.5 - Math.random());
            const selectedCards = shuffled.slice(0, 3);
            const positions = ["過去 (前因)", "現在 (現況)", "未來 (果報)"];

            selectedCards.forEach((star, index) => {
                const cardEl = document.getElementById(`card-${index}`);
                const isReversed = Math.random() > 0.5;
                const imgPrefix = isReversed ? "逆位" : "";
                
                const front = cardEl.querySelector('.card-front');
                front.style.backgroundImage = `url('images/${imgPrefix}${star.id}.png')`;
                
                setTimeout(() => cardEl.classList.add('flipped'), index * 400);

                const resBox = document.createElement('div');
                resBox.className = 'res-box';
                const orientName = isReversed ? "逆位 (能量受阻)" : "正位 (能量順暢)";
                const reversedHint = isReversed ? 
                    `<p style="color: var(--rev-red); font-weight: bold; font-size: 0.85rem; margin-bottom: 8px;">◈ 逆位警示：核心能量發揮受阻或過度，建議保守觀望，切勿急進。</p>` : "";
                
                resBox.innerHTML = `
                    <h4>${positions[index]}：${star.name}</h4>
                    <p style="color: var(--amber-gold); font-size: 0.9rem; margin-bottom: 12px;">【${orientName}】</p>
                    ${reversedHint}
                    <p>${star[currentType] || "建議您順勢而為。"}</p>
                `;
                resultContent.appendChild(resBox);
            });

            setTimeout(() => {
                document.getElementById('result-panel').style.display = 'block';
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 2500);
        }
    </script>
</body>
</html>
