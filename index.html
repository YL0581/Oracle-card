<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三才星引 - 為你紫點迷津</title>
    <style>
        :root {
            --bg-color: #f2f2f2; 
            --ink-black: #1a1a1a;
            --gold-leaf: #9a804d; 
            --text-dark: #2c2c2c;
        }

        body {
            background-color: var(--bg-color);
            /* 這裡已加入水墨山水背景的設計邏輯 */
            background-image: 
                linear-gradient(to bottom, rgba(255,255,255,0.8), rgba(255,255,255,0.2)),
                url('https://www.transparenttextures.com/patterns/pinstriped-suit.png'); /* 模擬紙張質感 */
            color: var(--text-dark);
            font-family: "Noto Serif TC", serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        /* 頂部水墨裝飾 */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 300px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.05), transparent);
            pointer-events: none;
            z-index: -1;
        }

        h1 { color: var(--ink-black); letter-spacing: 10px; margin-top: 50px; font-weight: 900; }
        .subtitle { color: #666; margin-bottom: 50px; letter-spacing: 3px; }

        .spread-container { display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; width: 100%; max-width: 1100px; }
        .card-wrapper { display: flex; flex-direction: column; align-items: center; }
        .pos-label { margin-bottom: 20px; color: var(--ink-black); font-weight: bold; border-bottom: 1px solid #ccc; }

        .card { width: 200px; height: 355px; position: relative; transform-style: preserve-3d; transition: transform 1.2s; cursor: pointer; }
        .card.flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 5px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* 卡片背面：水墨太極圖案 */
        .card-back { 
            background: #fff;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid #ddd;
        }
        .card-back::after {
            content: "☯"; /* 這裡建議您上傳太極圖到 images/back.png 並替換此處 */
            font-size: 80px;
            color: rgba(0,0,0,0.1);
            filter: blur(1px);
        }

        .card-front { background-size: cover; transform: rotateY(180deg); background-color: #fff; border: 1px solid #eee; }

        .action-btn { 
            background: var(--ink-black); color: #fff; border: none; padding: 18px 70px; 
            margin-top: 60px; cursor: pointer; font-size: 1.1rem; letter-spacing: 5px; transition: 0.3s;
        }
        .action-btn:hover { background: #444; }

        .result-panel { 
            display: none; max-width: 850px; width: 95%; margin-top: 60px; padding: 40px; 
            background: rgba(255,255,255,0.95); border-top: 3px solid var(--ink-black);
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
        }

        .res-section { margin-bottom: 30px; }
        .res-section h3 { color: var(--ink-black); border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .res-section p { line-height: 1.8; color: #444; }

        .summary-box { 
            margin-top: 40px; background: #fdfdfd; padding: 25px; border: 1px dashed #ccc; 
            line-height: 2; color: #333;
        }
    </style>
</head>
<body>

    <h1>三才星引</h1>
    <div class="subtitle">為你紫點迷津</div>

    <div class="spread-container">
        <div class="card-wrapper"><div class="pos-label">過去</div><div id="card-0" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div></div>
        <div class="card-wrapper"><div class="pos-label">現在</div><div id="card-1" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div></div>
        <div class="card-wrapper"><div class="pos-label">未來</div><div id="card-2" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div></div>
    </div>

    <button class="action-btn" id="draw-btn" onclick="executeOracle()">開啟神諭</button>

    <div id="result-panel" class="result-panel">
        <div id="result-content"></div>
        <center><button onclick="location.reload()" style="background:none; border:none; color:#999; cursor:pointer; margin-top:30px;">重新啟程</button></center>
    </div>

    <script>
        const deck = [
            { id: 1, name: "紫微星", hint: "扛起責任", msg: "之前壓力大，現在需展現肩膀解決問題。對人溫柔點，事情更好辦。" },
            { id: 2, name: "天機星", hint: "多動腦筋", msg: "腦子轉得快但別鑽牛角尖。保持靈活，轉機就在變動中。" },
            { id: 3, name: "太陽星", hint: "大方表現", msg: "適合露臉分享。別害羞，多跟人交流，路會越走越寬。" },
            { id: 4, name: "武曲星", hint: "直接去做", msg: "少說空話直接動手。專注成果，務實就是最好的策略。" },
            { id: 5, name: "天同星", hint: "放鬆一點", msg: "別逼太緊，順著感覺走。心情輕鬆，好運自然會找上你。" },
            { id: 6, name: "廉貞星", hint: "冷靜觀察", msg: "適合先看清楚再動。展現專業穩重，別人會更信你。" },
            { id: 7, name: "天府星", hint: "打穩基礎", msg: "適合守成顧好現有的。穩定就是進步，別急著亂跑。" },
            { id: 8, name: "太陰星", hint: "細心體察", msg: "低調也好。多聽多看，身邊女性長輩可能是大貴人。" },
            { id: 9, name: "貪狼星", hint: "集中目標", msg: "想做的事多但別貪心。選最重要的衝，力氣才不會分散。" },
            { id: 10, name: "巨門星", hint: "多聽少說", msg: "多做事少說話。用結果讓那些評論你的人心服口服。" },
            { id: 11, name: "天相星", hint: "熱心幫忙", msg: "拿出專業協調問題，你的價值很快就會被看見。" },
            { id: 12, name: "天梁星", hint: "累積福報", msg: "幫人解決麻煩其實是在幫自己累積好運，別怕吃虧。" },
            { id: 13, name: "七殺星", hint: "勇敢衝刺", msg: "雖然辛苦但衝過去就是新天地，勇敢面對改變。" },
            { id: 14, name: "破軍星", hint: "換個樣子", msg: "丟掉舊習慣。打破現狀才有新機會，變動是為了更好。" },
            { id: 15, name: "左輔星", hint: "找人幫忙", msg: "別自己扛。跟夥伴合作，大家一起動手效果翻倍。" },
            { id: 16, name: "右弼星", hint: "保持靈活", msg: "靈活點！意想不到的小幫手會出現，轉機就在身邊。" },
            { id: 17, name: "文昌星", hint: "展現聰明", msg: "靠專業展現才華。多溝通交流，現在表現會非常棒。" },
            { id: 18, name: "文曲星", hint: "跟著感覺", msg: "直覺很準。做點有美感的事，生活會發現驚喜。" },
            { id: 19, name: "天魁星", hint: "遇到貴人", msg: "有前輩會拉你一把。大膽展現優點，機會就在前方。" },
            { id: 20, name: "天鉞星", hint: "找到出口", msg: "看似沒路時細心觀察，就能找到隱藏的出路。" },
            { id: 21, name: "擎羊星", hint: "別硬碰硬", msg: "壓力大。別跟人吵，先退一步想清楚再衝會更有力。" },
            { id: 22, name: "陀羅星", hint: "需要耐心", msg: "進度卡卡。別急，時間會幫你磨掉那些討厭的問題。" },
            { id: 23, name: "地劫星", hint: "放平心態", msg: "有小插曲別放在心上。這是在過濾不適合的人事物。" },
            { id: 24, name: "地空星", hint: "看淡得失", msg: "平靜最重要。強求不來就換個角度，會輕鬆很多。" },
            { id: 25, name: "火星", hint: "反應快點", msg: "節奏變快！反應要快，但也要記得找時間休息。" },
            { id: 26, name: "鈴星", hint: "保持冷靜", msg: "冷靜應對流言。低調做事，穩定就是最好的狀態。" },
            { id: 27, name: "天馬星", hint: "多跑動", msg: "越動越好運！多出門聯絡，機會就在動起來的時候。" },
            { id: 28, name: "祿存星", hint: "安穩蓄力", msg: "環境正幫你積累實力。穩住就好，別急著大改。" },
            { id: 29, name: "化祿", hint: "好事發生", msg: "財運人緣變好。大方分享喜悅，收穫會更多。" },
            { id: 30, name: "化權", hint: "爭取主權", msg: "該出頭了。勇敢說出想法爭取主導，大家會聽你的。" },
            { id: 31, name: "化科", hint: "形象加分", msg: "評價變好。注意形象言行，這會成為未來的助力。" },
            { id: 32, name: "化忌", hint: "先停一下", msg: "不順手就停下思考。等路看清了再走，別硬衝。" }
        ];

        function executeOracle() {
            document.getElementById('draw-btn').style.display = 'none';
            const shuffled = [...deck].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 3);
            const positions = ["過去", "現在", "未來"];
            const resultContent = document.getElementById('result-content');
            
            resultContent.innerHTML = "";

            selected.forEach((star, index) => {
                const cardEl = document.getElementById(`card-${index}`);
                const isReversed = Math.random() > 0.5;
                const imgName = isReversed ? `逆位${star.id}.png` : `${star.id}.png`;
                
                cardEl.querySelector('.card-front').style.backgroundImage = `url('images/${imgName}')`;
                setTimeout(() => cardEl.classList.add('flipped'), index * 500);

                const section = document.createElement('div');
                section.className = 'res-section';
                section.innerHTML = `
                    <h3>${positions[index]}：${star.name}${isReversed ? '（逆位）' : ''}</h3>
                    <p>${star.msg}</p>
                `;
                resultContent.appendChild(section);
            });

            const summary = document.createElement('div');
            summary.className = 'summary-box';
            summary.innerHTML = `
                <b>✨ 給你的建議：</b><br>
                你之前的狀況主要是「${selected[0].hint}」，而現在進入了「${selected[1].hint}」的階段。
                接下來會往「${selected[2].hint}」的方向發展。現在穩住，路就清晰了！
            `;
            resultContent.appendChild(summary);

            setTimeout(() => {
                document.getElementById('result-panel').style.display = 'block';
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 2500);
        }
    </script>
</body>
</html>
