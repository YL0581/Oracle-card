<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>紫微三才神諭 - 現代東方美學</title>
    <style>
        :root { --amber-gold: #d4a017; --bg-dark: #0f0c29; --text-gold: #f4e4bc; --rev-red: #ff4d4d; }
        body { background: var(--bg-dark); color: var(--text-gold); font-family: "Noto Serif TC", serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        h1 { color: var(--amber-gold); letter-spacing: 5px; text-shadow: 0 0 10px rgba(212, 160, 23, 0.5); }
        .type-selector { margin: 20px 0; display: flex; gap: 15px; }
        .type-btn { background: transparent; border: 1px solid var(--amber-gold); color: var(--amber-gold); padding: 8px 25px; border-radius: 20px; cursor: pointer; font-weight: bold; }
        .type-btn.active { background: var(--amber-gold); color: #000; }
        .spread-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 30px; width: 100%; }
        .card-wrapper { display: flex; flex-direction: column; align-items: center; }
        .pos-label { margin-bottom: 15px; color: var(--amber-gold); font-size: 1.2rem; font-weight: bold; }
        .card { width: 200px; height: 355px; position: relative; transform-style: preserve-3d; transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1); }
        .card.flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 12px; border: 2px solid var(--amber-gold); overflow: hidden; }
        .card-back { background: linear-gradient(135deg, #1a1a1a, #4b3621); display: flex; align-items: center; justify-content: center; }
        .card-back::before { content: "◈"; font-size: 40px; color: var(--amber-gold); }
        .card-front { background-color: #000; background-size: cover; background-position: center; transform: rotateY(180deg); }
        .result-panel { display: none; max-width: 1000px; width: 95%; margin-top: 50px; padding: 30px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; border-top: 4px solid var(--amber-gold); backdrop-filter: blur(10px); margin-bottom: 80px; }
        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 20px; }
        .res-box { padding: 20px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(212, 160, 23, 0.3); border-radius: 10px; }
        .res-box h4 { color: var(--amber-gold); margin-top: 0; border-bottom: 1px solid rgba(212, 160, 23, 0.2); padding-bottom: 10px; }
        .res-box p { line-height: 1.6; font-size: 0.95rem; }
        .action-btn { background: var(--amber-gold); color: #000; border: none; padding: 15px 45px; border-radius: 30px; font-weight: bold; margin-top: 40px; cursor: pointer; box-shadow: 0 0 20px rgba(212, 160, 23, 0.4); }
    </style>
</head>
<body>
    <h1>紫微三才神諭</h1>
    <div class="type-selector">
        <button class="type-btn active" onclick="selectType('career', this)">事業</button>
        <button class="type-btn" onclick="selectType('love', this)">感情</button>
        <button class="type-btn" onclick="selectType('wealth', this)">財運</button>
    </div>
    <div class="spread-container">
        <div class="card-wrapper"><div class="pos-label">過去 (前因)</div><div id="card-0" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div></div>
        <div class="card-wrapper"><div class="pos-label">現在 (現況)</div><div id="card-1" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div></div>
        <div class="card-wrapper"><div class="pos-label">未來 (果報)</div><div id="card-2" class="card"><div class="card-face card-back"></div><div class="card-face card-front"></div></div></div>
    </div>
    <button class="action-btn" id="draw-btn" onclick="drawThreeCards()">開啟三才牌陣</button>
    <div id="result-panel" class="result-panel">
        <h2 style="text-align:center; color: var(--amber-gold);">─ 神諭解讀 ─</h2>
        <div class="result-grid" id="result-content"></div>
        <center><button onclick="location.reload()" style="background:none; color:var(--amber-gold); border:1px solid var(--amber-gold); padding:10px 20px; border-radius:20px; margin-top:40px; cursor:pointer;">重新抽牌</button></center>
    </div>

    <script>
        let currentType = 'career';
        const deck = [
            { id: 1, name: "紫微星", career: "【事業】具領導力，深得器重。", love: "【感情】對方條件優越，相處需平等。", wealth: "【財運】正財運佳，利長期佈局。" },
            { id: 2, name: "天機星", career: "【事業】適合創意策劃，計畫多變。", love: "【感情】心思細膩，容易多慮。", wealth: "【財運】靠智慧取財，利短期投機。" },
            { id: 3, name: "太陽星", career: "【事業】名聲帶動利益，適合外交。", love: "【感情】熱情陽光，感情溫馨。", wealth: "【財運】先求名後得利，慷慨支出。" },
            { id: 4, name: "武曲星", career: "【事業】執行力強，適合金融技術。", love: "【感情】個性直爽，不夠浪漫。", wealth: "【財運】正財星旺，回報豐厚。" },
            { id: 5, name: "天同星", career: "【事業】人緣好，適合行政協調。", love: "【感情】和諧甜蜜，注重感覺。", wealth: "【財運】衣食無憂，有穩定小財。" },
            { id: 6, name: "廉貞星", career: "【事業】外交強，需防文書糾紛。", love: "【感情】桃花旺，注意佔有慾。", wealth: "【財運】偏財不穩，宜守不宜攻。" },
            { id: 7, name: "天府星", career: "【事業】管理職優，作風穩健。", love: "【感情】重物質與保障，具安全感。", wealth: "【財運】財庫豐滿，適儲蓄置產。" },
            { id: 8, name: "太陰星", career: "【事業】適合幕後創作、房地產。", love: "【感情】溫柔細膩，精神契合。", wealth: "【財運】財源積蓄所得，細水長流。" },
            { id: 9, name: "貪狼星", career: "【事業】社交廣，競爭力強。", love: "【感情】異性緣佳，生活精彩。", wealth: "【財運】偏財運強，防暴發暴敗。" },
            { id: 10, name: "巨門星", career: "【事業】靠口才吃飯，防口舌是非。", love: "【感情】因言語爭執易生隔閡。", wealth: "【財運】辛苦得財，防因錢糾紛。" },
            { id: 11, name: "天相星", career: "【事業】得力助手，適合管理。", love: "【感情】重門當戶對，感情得體。", wealth: "【財運】得貴人指點，財運穩定。" },
            { id: 12, name: "天梁星", career: "【事業】適醫療教育，具有廕蔭。", love: "【感情】喜歡照顧對方，長輩關愛。", wealth: "【財運】有繼承或長輩贈與運。" },
            { id: 13, name: "七殺星", career: "【事業】開創性強，適合創業。", love: "【感情】愛恨分明，進展極快。", wealth: "【財運】橫發之財，來去速度快。" },
            { id: 14, name: "破軍星", career: "【事業】大變動中，破舊立新。", love: "【感情】多波折，宜給予空間。", wealth: "【財運】起伏劇烈，防錢財冒險。" },
            { id: 15, name: "左輔星", career: "【事業】有貴人助力，計畫順利。", love: "【感情】感情穩定，得親友祝福。", wealth: "【財運】財運平順，適合團體開發。" },
            { id: 16, name: "右弼星", career: "【事業】困境有轉機，得支援。", love: "【感情】有轉機或第三者調解。", wealth: "【財運】有小偏財或失而復得。" },
            { id: 17, name: "文昌星", career: "【事業】利考試升遷、簽約。", love: "【感情】注重契合，充滿詩意。", wealth: "【財運】靠智慧與專業致富。" },
            { id: 18, name: "文曲星", career: "【事業】適合藝術創意，有特色。", love: "【感情】浪漫細膩，異性緣好。", wealth: "【財運】以技藝取財，財路多。" },
            { id: 21, name: "擎羊星", career: "【事業】競爭力強但防排擠。", love: "【感情】相處難，容易爭執。", wealth: "【財運】財富險中求，防破財。" },
            { id: 22, name: "陀羅星", career: "【事業】進展緩慢，需耐心。", love: "【感情】糾纏不清，陷入苦戀。", wealth: "【財運】求財辛苦，牛步緩慢。" },
            { id: 32, name: "化忌", career: "【事業】是非多，計畫受阻。", love: "【感情】多災多難，因執著受傷。", wealth: "【財運】財運困頓，防債務糾紛。" }
        ];

        function selectType(type, btn) {
            currentType = type;
            document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function drawThreeCards() {
            document.getElementById('draw-btn').style.display = 'none';
            const resultContent = document.getElementById('result-content');
            resultContent.innerHTML = '';
            const shuffled = [...deck].sort(() => 0.5 - Math.random());
            const selectedCards = shuffled.slice(0, 3);
            const positions = ["過去 (前因)", "現在 (現況)", "未來 (果報)"];

            selectedCards.forEach((star, index) => {
                const cardEl = document.getElementById(`card-${index}`);
                const isReversed = Math.random() > 0.5;
                const imgPrefix = isReversed ? "逆位" : "";
                const front = cardEl.querySelector('.card-front');
                front.style.backgroundImage = `url('images/${imgPrefix}${star.id}.png')`;
                
                setTimeout(() => cardEl.classList.add('flipped'), index * 400);

                const resBox = document.createElement('div');
                resBox.className = 'res-box';
                const orientName = isReversed ? "逆位" : "正位";
                const reversedHint = isReversed ? `<p style="color: var(--rev-red); font-weight: bold;">◈ 逆位提醒：能量受阻，需保守行事。</p>` : "";
                
                resBox.innerHTML = `
                    <h4>${positions[index]}：${star.name}</h4>
                    <p style="color: var(--amber-gold);">【${orientName}】</p>
                    ${reversedHint}
                    <p>${star[currentType] || "建議您順勢而為。"}</p>
                `;
                resultContent.appendChild(resBox);
            });

            setTimeout(() => {
                document.getElementById('result-panel').style.display = 'block';
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 2500);
        }
    </script>
</body>
</html>
